{"ast":null,"code":"import { USER_BASE_URL } from \"../../../utils/constants\";\nimport { loginFailure, loginSuccess, logout } from \"./reducers\";\nimport { request } from \"../../../components/core/Request/request\";\nimport { continueSession, startSession } from \"../../../redux/core/session/reducers\";\nimport { showSidebar } from \"../../../redux/core/layout/reducers\";\nexport const login = async ({\n  username,\n  password,\n  dispatch\n}) => {\n  await request({\n    url: USER_BASE_URL + '/login',\n    method: 'POST',\n    data: {\n      username,\n      password\n    }\n  }).then(response => {\n    dispatch(loginSuccess());\n    dispatch(startSession(response.data));\n  }).catch(error => {\n    dispatch(loginFailure(error.message));\n  });\n};\nexport const getSession = async ({\n  userId,\n  dispatch\n}) => {\n  await request({\n    url: USER_BASE_URL + '/user/getSession/' + userId,\n    method: 'GET',\n    headers: {\n      'Access-Control-Allow-Origin': '*'\n    }\n  }).then(response => {\n    dispatch(continueSession(response.data));\n    dispatch(loginSuccess());\n    dispatch(showSidebar());\n  }).catch(err => {\n    console.error(err);\n  });\n};\nexport const logoutUser = async ({\n  userId,\n  dispatch\n}) => {\n  await request({\n    url: USER_BASE_URL + '/logout/' + userId,\n    method: 'DELETE'\n  }).then(() => {\n    console.log(\"here\");\n    dispatch(logout());\n  }).catch(error => {\n    console.error('Logout Error:', error);\n  });\n};","map":{"version":3,"names":["USER_BASE_URL","loginFailure","loginSuccess","logout","request","continueSession","startSession","showSidebar","login","username","password","dispatch","url","method","data","then","response","catch","error","message","getSession","userId","headers","err","console","logoutUser","log"],"sources":["D:/an3_facultate/sem1/IS/laboratoare/SocialApp-Fe/social-media-front/src/widgets/auth-login-widget/model/effects.ts"],"sourcesContent":["import {USER_BASE_URL} from \"../../../utils/constants\";\r\nimport {loginFailure, loginSuccess, logout} from \"./reducers\";\r\nimport {getSessionState, LoginProps} from \"./types\";\r\nimport {request} from \"../../../components/core/Request/request\";\r\nimport {continueSession, startSession} from \"../../../redux/core/session/reducers\";\r\nimport {showSidebar} from \"../../../redux/core/layout/reducers\";\r\n\r\nexport const login = async ({username, password, dispatch}: LoginProps) => {\r\n    await request({\r\n        url: USER_BASE_URL + '/login',\r\n        method: 'POST',\r\n        data: {username, password}\r\n    }).then((response) => {\r\n        dispatch(loginSuccess());\r\n        dispatch(startSession(response.data));\r\n    }).catch((error) => {\r\n        dispatch(loginFailure(error.message));\r\n    })\r\n}\r\n\r\nexport const getSession = async ({ userId, dispatch }: getSessionState) => {\r\n    await request({\r\n        url: USER_BASE_URL + '/user/getSession/' + userId,\r\n        method: 'GET',\r\n        headers: {\r\n            'Access-Control-Allow-Origin': '*'\r\n        }\r\n    }).then((response) => {\r\n        dispatch(continueSession(response.data))\r\n        dispatch(loginSuccess());\r\n        dispatch(showSidebar());\r\n    }).catch((err) => {\r\n        console.error(err);\r\n    })\r\n}\r\n\r\nexport const logoutUser = async ({ userId, dispatch }: getSessionState) => {\r\n    await request({\r\n        url: USER_BASE_URL + '/logout/'+ userId,\r\n        method: 'DELETE',\r\n    }).then(() => {\r\n        console.log(\"here\")\r\n        dispatch(logout());\r\n\r\n    }).catch((error) => {\r\n        console.error('Logout Error:', error);\r\n\r\n    });\r\n};"],"mappings":"AAAA,SAAQA,aAAa,QAAO,0BAA0B;AACtD,SAAQC,YAAY,EAAEC,YAAY,EAAEC,MAAM,QAAO,YAAY;AAE7D,SAAQC,OAAO,QAAO,0CAA0C;AAChE,SAAQC,eAAe,EAAEC,YAAY,QAAO,sCAAsC;AAClF,SAAQC,WAAW,QAAO,qCAAqC;AAE/D,OAAO,MAAMC,KAAK,GAAG,MAAAA,CAAO;EAACC,QAAQ;EAAEC,QAAQ;EAAEC;AAAoB,CAAC,KAAK;EACvE,MAAMP,OAAO,CAAC;IACVQ,GAAG,EAAEZ,aAAa,GAAG,QAAQ;IAC7Ba,MAAM,EAAE,MAAM;IACdC,IAAI,EAAE;MAACL,QAAQ;MAAEC;IAAQ;EAC7B,CAAC,CAAC,CAACK,IAAI,CAAEC,QAAQ,IAAK;IAClBL,QAAQ,CAACT,YAAY,CAAC,CAAC,CAAC;IACxBS,QAAQ,CAACL,YAAY,CAACU,QAAQ,CAACF,IAAI,CAAC,CAAC;EACzC,CAAC,CAAC,CAACG,KAAK,CAAEC,KAAK,IAAK;IAChBP,QAAQ,CAACV,YAAY,CAACiB,KAAK,CAACC,OAAO,CAAC,CAAC;EACzC,CAAC,CAAC;AACN,CAAC;AAED,OAAO,MAAMC,UAAU,GAAG,MAAAA,CAAO;EAAEC,MAAM;EAAEV;AAA0B,CAAC,KAAK;EACvE,MAAMP,OAAO,CAAC;IACVQ,GAAG,EAAEZ,aAAa,GAAG,mBAAmB,GAAGqB,MAAM;IACjDR,MAAM,EAAE,KAAK;IACbS,OAAO,EAAE;MACL,6BAA6B,EAAE;IACnC;EACJ,CAAC,CAAC,CAACP,IAAI,CAAEC,QAAQ,IAAK;IAClBL,QAAQ,CAACN,eAAe,CAACW,QAAQ,CAACF,IAAI,CAAC,CAAC;IACxCH,QAAQ,CAACT,YAAY,CAAC,CAAC,CAAC;IACxBS,QAAQ,CAACJ,WAAW,CAAC,CAAC,CAAC;EAC3B,CAAC,CAAC,CAACU,KAAK,CAAEM,GAAG,IAAK;IACdC,OAAO,CAACN,KAAK,CAACK,GAAG,CAAC;EACtB,CAAC,CAAC;AACN,CAAC;AAED,OAAO,MAAME,UAAU,GAAG,MAAAA,CAAO;EAAEJ,MAAM;EAAEV;AAA0B,CAAC,KAAK;EACvE,MAAMP,OAAO,CAAC;IACVQ,GAAG,EAAEZ,aAAa,GAAG,UAAU,GAAEqB,MAAM;IACvCR,MAAM,EAAE;EACZ,CAAC,CAAC,CAACE,IAAI,CAAC,MAAM;IACVS,OAAO,CAACE,GAAG,CAAC,MAAM,CAAC;IACnBf,QAAQ,CAACR,MAAM,CAAC,CAAC,CAAC;EAEtB,CAAC,CAAC,CAACc,KAAK,CAAEC,KAAK,IAAK;IAChBM,OAAO,CAACN,KAAK,CAAC,eAAe,EAAEA,KAAK,CAAC;EAEzC,CAAC,CAAC;AACN,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}