{"ast":null,"code":"var _jsxFileName = \"D:\\\\an3_facultate\\\\sem1\\\\IS\\\\laboratoare\\\\SocialApp-Fe\\\\social-media-front\\\\src\\\\components\\\\feed\\\\StorySlider\\\\StorySlider.tsx\",\n  _s = $RefreshSig$();\n// StorySlider.tsx\n\nimport React, { useEffect, useState } from \"react\";\nimport Story from \"../../core/Story/Story\";\nimport SimpleModal from \"./SimpleModal\";\nimport { sessionSelect } from \"../../../redux/core/session/selectors\";\nimport { useSelector } from \"react-redux\";\n\n// Assuming User has these basic properties, adjust according to your actual User model\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst StorySlider = ({\n  stories\n}) => {\n  _s();\n  const [selectedUserIndex, setSelectedUserIndex] = useState(null);\n  const [selectedStoryIndex, setSelectedStoryIndex] = useState(null);\n  const profilePicture = useSelector(sessionSelect.profilePicture);\n  const selectedUserId = selectedUserIndex !== null ? stories[selectedUserIndex].user.userId : null;\n  const [isDarkMode, setIsDarkMode] = useState(false);\n  useEffect(() => {\n    const darkModeSetting = localStorage.getItem('hasDarkMode') === 'true';\n    setIsDarkMode(darkModeSetting);\n  }, []);\n  const handleUserClick = userIndex => {\n    setSelectedUserIndex(userIndex);\n    setSelectedStoryIndex(0);\n  };\n  const handleCloseModal = () => {\n    setSelectedUserIndex(null);\n    setSelectedStoryIndex(null);\n  };\n  const handlePrevStory = () => {\n    if (selectedUserIndex !== null && selectedStoryIndex !== null) {\n      if (selectedStoryIndex > 0) {\n        // @ts-ignore\n        setSelectedStoryIndex(prevIndex => prevIndex - 1);\n      } else {\n        if (selectedUserIndex > 0) {\n          // @ts-ignore\n          setSelectedUserIndex(prevIndex => prevIndex - 1);\n          setSelectedStoryIndex(stories[selectedUserIndex - 1].stories.length - 1);\n        }\n      }\n    }\n  };\n  const handleNextStory = () => {\n    if (selectedUserIndex !== null && selectedStoryIndex !== null) {\n      const currentMaxIndex = stories[selectedUserIndex].stories.length - 1;\n      if (selectedStoryIndex < currentMaxIndex) {\n        // @ts-ignore\n        setSelectedStoryIndex(prevIndex => prevIndex + 1);\n      } else {\n        if (selectedUserIndex < stories.length - 1) {\n          // @ts-ignore\n          setSelectedUserIndex(prevIndex => prevIndex + 1);\n          setSelectedStoryIndex(0);\n        }\n      }\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: `story-slider ${isDarkMode ? 'dark-mode' : ''}`,\n      children: stories.map((userStories, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n        onClick: () => handleUserClick(index),\n        children: /*#__PURE__*/_jsxDEV(Story, {\n          ...userStories.stories[0]\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 25\n        }, this)\n      }, userStories.user.userId, false, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 21\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 13\n    }, this), selectedUserIndex !== null && selectedStoryIndex !== null && /*#__PURE__*/_jsxDEV(SimpleModal, {\n      isOpen: true\n      // @ts-ignore\n      ,\n      userId: selectedUserId,\n      handleClose: handleCloseModal,\n      handlePrev: handlePrevStory,\n      handleNext: handleNextStory,\n      username: stories[selectedUserIndex].user.username,\n      profilePicture: profilePicture,\n      children: /*#__PURE__*/_jsxDEV(\"img\", {\n        src: stories[selectedUserIndex].stories[selectedStoryIndex].photo,\n        alt: \"Story\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true);\n};\n_s(StorySlider, \"keb/mYzDdVlIo2AEp9KQ1UhmsD8=\", false, function () {\n  return [useSelector];\n});\n_c = StorySlider;\nexport default StorySlider;\nvar _c;\n$RefreshReg$(_c, \"StorySlider\");","map":{"version":3,"names":["React","useEffect","useState","Story","SimpleModal","sessionSelect","useSelector","jsxDEV","_jsxDEV","Fragment","_Fragment","StorySlider","stories","_s","selectedUserIndex","setSelectedUserIndex","selectedStoryIndex","setSelectedStoryIndex","profilePicture","selectedUserId","user","userId","isDarkMode","setIsDarkMode","darkModeSetting","localStorage","getItem","handleUserClick","userIndex","handleCloseModal","handlePrevStory","prevIndex","length","handleNextStory","currentMaxIndex","children","className","map","userStories","index","onClick","fileName","_jsxFileName","lineNumber","columnNumber","isOpen","handleClose","handlePrev","handleNext","username","src","photo","alt","_c","$RefreshReg$"],"sources":["D:/an3_facultate/sem1/IS/laboratoare/SocialApp-Fe/social-media-front/src/components/feed/StorySlider/StorySlider.tsx"],"sourcesContent":["// StorySlider.tsx\r\n\r\nimport React, {useEffect, useState} from \"react\";\r\nimport {StoryType} from \"../../../types/auth\";\r\nimport Story from \"../../core/Story/Story\";\r\nimport SimpleModal from \"./SimpleModal\";\r\nimport {sessionSelect} from \"../../../redux/core/session/selectors\";\r\nimport {useSelector} from \"react-redux\";\r\n\r\n// Assuming User has these basic properties, adjust according to your actual User model\r\ninterface User {\r\n    userId: string;\r\n    username: string;\r\n}\r\n\r\ninterface GroupedStories {\r\n    user: User;\r\n    stories: StoryType[];\r\n}\r\n\r\ninterface StorySliderProps {\r\n    stories: GroupedStories[];\r\n}\r\n\r\nconst StorySlider: React.FC<StorySliderProps> = ({ stories }) => {\r\n    const [selectedUserIndex, setSelectedUserIndex] = useState<number | null>(null);\r\n    const [selectedStoryIndex, setSelectedStoryIndex] = useState<number | null>(null);\r\n    const profilePicture = useSelector(sessionSelect.profilePicture);\r\n    const selectedUserId = selectedUserIndex !== null ? stories[selectedUserIndex].user.userId : null;\r\n\r\n    const [isDarkMode, setIsDarkMode] = useState(false);\r\n    useEffect(() => {\r\n        const darkModeSetting = localStorage.getItem('hasDarkMode') === 'true';\r\n        setIsDarkMode(darkModeSetting);\r\n    }, []);\r\n\r\n\r\n    const handleUserClick = (userIndex: number) => {\r\n        setSelectedUserIndex(userIndex);\r\n        setSelectedStoryIndex(0);\r\n    };\r\n\r\n    const handleCloseModal = () => {\r\n        setSelectedUserIndex(null);\r\n        setSelectedStoryIndex(null);\r\n    };\r\n\r\n    const handlePrevStory = () => {\r\n        if (selectedUserIndex !== null && selectedStoryIndex !== null) {\r\n            if (selectedStoryIndex > 0) {\r\n                // @ts-ignore\r\n                setSelectedStoryIndex(prevIndex => prevIndex - 1);\r\n            } else {\r\n                if (selectedUserIndex > 0) {\r\n                    // @ts-ignore\r\n                    setSelectedUserIndex(prevIndex => prevIndex - 1);\r\n                    setSelectedStoryIndex(stories[selectedUserIndex - 1].stories.length - 1);\r\n                }\r\n            }\r\n        }\r\n    };\r\n\r\n\r\n    const handleNextStory = () => {\r\n        if (selectedUserIndex !== null && selectedStoryIndex !== null) {\r\n            const currentMaxIndex = stories[selectedUserIndex].stories.length - 1;\r\n\r\n            if (selectedStoryIndex < currentMaxIndex) {\r\n                // @ts-ignore\r\n                setSelectedStoryIndex(prevIndex => prevIndex + 1);\r\n            } else {\r\n                if (selectedUserIndex < stories.length - 1) {\r\n                    // @ts-ignore\r\n                    setSelectedUserIndex(prevIndex => prevIndex + 1);\r\n                    setSelectedStoryIndex(0);\r\n                }\r\n            }\r\n        }\r\n    };\r\n\r\n\r\n    return (\r\n        <>\r\n            <div className={`story-slider ${isDarkMode ? 'dark-mode' : ''}`}>\r\n                {stories.map((userStories, index) => (\r\n                    <div onClick={() => handleUserClick(index)} key={userStories.user.userId}>\r\n                        <Story {...userStories.stories[0]} />\r\n                    </div>\r\n                ))}\r\n            </div>\r\n            {selectedUserIndex !== null && selectedStoryIndex !== null && (\r\n                <SimpleModal\r\n                    isOpen={true}\r\n                    // @ts-ignore\r\n                    userId={selectedUserId}\r\n                    handleClose={handleCloseModal}\r\n                    handlePrev={handlePrevStory}\r\n                    handleNext={handleNextStory}\r\n                    username={stories[selectedUserIndex].user.username}\r\n                    profilePicture={profilePicture}\r\n                >\r\n                    <img src={stories[selectedUserIndex].stories[selectedStoryIndex].photo} alt=\"Story\" />\r\n                </SimpleModal>\r\n            )}\r\n        </>\r\n    );\r\n};\r\n\r\nexport default StorySlider;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}